 # ğŸ› ï¸ ì‚¬ê³ ë£¨í‹´ ì›¹ì•± ê¸°ìˆ  ë¬¸ì„œ

## ğŸ“‹ ëª©ì°¨
1. [í”„ë¡œì íŠ¸ ê°œìš”](#í”„ë¡œì íŠ¸-ê°œìš”)
2. [ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜](#ì‹œìŠ¤í…œ-ì•„í‚¤í…ì²˜)
3. [ê¸°ìˆ  ìŠ¤íƒ](#ê¸°ìˆ -ìŠ¤íƒ)
4. [ë°±ì—”ë“œ êµ¬ì¡°](#ë°±ì—”ë“œ-êµ¬ì¡°)
5. [í”„ë¡ íŠ¸ì—”ë“œ êµ¬ì¡°](#í”„ë¡ íŠ¸ì—”ë“œ-êµ¬ì¡°)
6. [ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„](#ë°ì´í„°ë² ì´ìŠ¤-ì„¤ê³„)
7. [AI í†µí•©](#ai-í†µí•©)
8. [ë°°í¬ ë° ì¸í”„ë¼](#ë°°í¬-ë°-ì¸í”„ë¼)
9. [ë³´ì•ˆ ë° ì¸ì¦](#ë³´ì•ˆ-ë°-ì¸ì¦)
10. [ì„±ëŠ¥ ìµœì í™”](#ì„±ëŠ¥-ìµœì í™”)

---

## ğŸ“Š í”„ë¡œì íŠ¸ ê°œìš”

### ğŸ¯ **í”„ë¡œì íŠ¸ ì •ë³´**
- **ì´ë¦„**: thinking-routines-app
- **ë²„ì „**: 1.0.0
- **ë¼ì´ì„ ìŠ¤**: MIT
- **Node.js ë²„ì „**: >=18.0.0
- **ë°°í¬ URL**: [thinking-routines.vercel.app](https://thinking-routines.vercel.app/)

### ğŸ’¡ **í•µì‹¬ ê¸°ëŠ¥**
- 7ê°€ì§€ í•˜ë²„ë“œ Project Zero ì‚¬ê³ ë£¨í‹´ êµ¬í˜„
- ì‹¤ì‹œê°„ êµì‚¬-í•™ìƒ ìƒí˜¸ì‘ìš©
- AI ê¸°ë°˜ í•™ìŠµ ë¶„ì„ ë° í”¼ë“œë°±
- ìŒì„± ì…ë ¥ ì§€ì› (STT)
- í¬íŠ¸í´ë¦¬ì˜¤ ì‹œìŠ¤í…œ

---

## ğŸ—ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### **ì „ì²´ ì•„í‚¤í…ì²˜**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Vercel Edge Network                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                     Frontend (React)                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   Teacher UI    â”‚  â”‚   Student UI    â”‚  â”‚  Landing Page â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    Backend API (Node.js)                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   Auth Routes   â”‚  â”‚   Room Routes   â”‚  â”‚   AI Routes   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                     External Services                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   Supabase      â”‚  â”‚   Google AI     â”‚  â”‚   Channel.io  â”‚ â”‚
â”‚  â”‚   (Database)    â”‚  â”‚   (Gemini)      â”‚  â”‚   (Support)   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **ë°ì´í„° í”Œë¡œìš°**
```
Teacher                Student               AI Service
   â”‚                      â”‚                      â”‚
   â”œâ”€ Create Room â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
   â”‚                      â”‚                      â”‚
   â”œâ”€ Generate Code â”€â”€â”€â”€â”€â”€â”¤                      â”‚
   â”‚                      â”‚                      â”‚
   â”‚                   â”Œâ”€â”€â–¼â”€â”€ Join Room          â”‚
   â”‚                   â”‚                         â”‚
   â”‚                   â”œâ”€â”€â”€ Submit Response â”€â”€â”€â”€â–¶â”‚
   â”‚                   â”‚                         â”‚
   â”‚â—€â”€ Real-time â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€ Get Analysis â—€â”€â”€â”€â”€â”€â”€â”¤
   â”‚   Updates         â”‚                         â”‚
   â”‚                   â”‚                         â”‚
   â”œâ”€ Review & â”€â”€â”€â”€â”€â”€â”€â”€â”¤                         â”‚
   â”‚   Feedback        â”‚                         â”‚
```

---

## ğŸ”§ ê¸°ìˆ  ìŠ¤íƒ

### **Frontend**
```json
{
  "core": {
    "React": "^19.1.0",
    "React DOM": "^19.1.0", 
    "TypeScript": "^4.9.5",
    "React Router": "^7.6.3"
  },
  "styling": {
    "Tailwind CSS": "^3.x",
    "@tailwindcss/forms": "^0.5.10"
  },
  "state_management": {
    "React Hooks": "Built-in",
    "Local State": "useState, useEffect"
  },
  "api_client": {
    "Axios": "^1.10.0",
    "@supabase/supabase-js": "^2.50.5"
  },
  "ai_integration": {
    "@google/generative-ai": "^0.24.1"
  },
  "testing": {
    "@testing-library/react": "^16.3.0",
    "@testing-library/jest-dom": "^6.6.3",
    "Jest": "Built-in with CRA"
  },
  "support": {
    "@channel.io/channel-web-sdk-loader": "2.0.0"
  }
}
```

### **Backend**
```json
{
  "runtime": {
    "Node.js": ">=18.0.0",
    "Express.js": "^5.1.0"
  },
  "database": {
    "@supabase/supabase-js": "^2.50.5",
    "PostgreSQL": "via Supabase"
  },
  "authentication": {
    "Supabase Auth": "^2.50.5",
    "JWT": "^9.0.2",
    "bcryptjs": "^2.4.3"
  },
  "ai_services": {
    "@google/genai": "^1.13.0",
    "Google Gemini": "2.0-flash-lite"
  },
  "middleware": {
    "CORS": "^2.8.5",
    "Multer": "^1.4.5-lts.1",
    "dotenv": "^17.2.0"
  },
  "development": {
    "nodemon": "^3.1.10",
    "TypeScript": "Dev support"
  }
}
```

### **Infrastructure & Services**
```json
{
  "hosting": {
    "Vercel": "Frontend + Serverless Functions",
    "Edge Network": "Global CDN"
  },
  "database": {
    "Supabase": "PostgreSQL + Real-time + Auth",
    "Storage": "File uploads via Supabase Storage"
  },
  "ai_services": {
    "Google AI Studio": "Gemini API",
    "Model": "gemini-2.0-flash-lite"
  },
  "monitoring": {
    "Channel.io": "Customer Support",
    "Vercel Analytics": "Performance monitoring"
  }
}
```

---

## ğŸ”™ ë°±ì—”ë“œ êµ¬ì¡°

### **ì„œë²„ ì„¤ì • (`server.js`)**
```javascript
// í•µì‹¬ ë¯¸ë“¤ì›¨ì–´ ìŠ¤íƒ
app.use(cors());           // CORS í—ˆìš©
app.use(express.json());   // JSON íŒŒì‹±

// ì„œë¹„ìŠ¤ ì´ˆê¸°í™”
const supabase = createClient(
  process.env.SUPABASE_URL,
  process.env.SUPABASE_ANON_KEY
);

const genAI = new GoogleGenerativeAI(
  process.env.GEMINI_API_KEY
);
```

### **API ë¼ìš°íŠ¸ êµ¬ì¡°**
```
/api/
â”œâ”€â”€ auth/                    # ì¸ì¦ ê´€ë ¨
â”‚   â”œâ”€â”€ POST /signup        # êµì‚¬ íšŒì›ê°€ì…
â”‚   â”œâ”€â”€ POST /login         # êµì‚¬ ë¡œê·¸ì¸
â”‚   â””â”€â”€ POST /logout        # ë¡œê·¸ì•„ì›ƒ
â”œâ”€â”€ rooms/                   # í™œë™ë°© ê´€ë¦¬
â”‚   â”œâ”€â”€ POST /create        # í™œë™ë°© ìƒì„±
â”‚   â”œâ”€â”€ GET /:roomId        # í™œë™ë°© ì¡°íšŒ
â”‚   â”œâ”€â”€ PUT /:roomId        # í™œë™ë°© ìˆ˜ì •
â”‚   â”œâ”€â”€ DELETE /:roomId     # í™œë™ë°© ì‚­ì œ
â”‚   â””â”€â”€ GET /teacher/:teacherId  # êµì‚¬ë³„ í™œë™ë°© ëª©ë¡
â”œâ”€â”€ responses/               # í•™ìƒ ì‘ë‹µ ê´€ë¦¬
â”‚   â”œâ”€â”€ POST /submit        # ì‘ë‹µ ì œì¶œ
â”‚   â”œâ”€â”€ GET /:roomId        # í™œë™ë°©ë³„ ì‘ë‹µ ëª©ë¡
â”‚   â””â”€â”€ GET /:responseId    # ê°œë³„ ì‘ë‹µ ì¡°íšŒ
â””â”€â”€ analyze-routine-image/   # AI ë¶„ì„
    â””â”€â”€ POST /              # ì´ë¯¸ì§€ ë¶„ì„ ìš”ì²­
```

### **ì¸ì¦ ë¯¸ë“¤ì›¨ì–´**
```javascript
const authenticateToken = async (req, res, next) => {
  try {
    const token = req.headers.authorization?.replace('Bearer ', '');
    
    if (!token) {
      return res.status(401).json({ 
        error: 'ì¸ì¦ í† í°ì´ í•„ìš”í•©ë‹ˆë‹¤.' 
      });
    }

    const { data: userData, error: userError } = 
      await supabase.auth.getUser(token);
    
    if (userError || !userData.user) {
      return res.status(401).json({ 
        error: 'ìœ íš¨í•˜ì§€ ì•Šì€ í† í°ì…ë‹ˆë‹¤.' 
      });
    }

    req.user = userData.user;
    next();
  } catch (error) {
    console.error('Auth middleware error:', error);
    res.status(500).json({ 
      error: 'ì¸ì¦ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.' 
    });
  }
};
```

### **í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§**

#### **1. í™œë™ë°© ì½”ë“œ ìƒì„±**
```javascript
// 6ìë¦¬ ê³ ìœ  ì½”ë“œ ìƒì„±
const generateUniqueRoomCode = async () => {
  let code;
  let isUnique = false;
  let attempts = 0;
  const maxAttempts = 10;

  while (!isUnique && attempts < maxAttempts) {
    code = Math.floor(100000 + Math.random() * 900000).toString();
    
    // ì¤‘ë³µ ì²´í¬
    const { data: existingRoom, error } = await supabase
      .from('activity_rooms')
      .select('id')
      .eq('room_code', code)
      .eq('is_active', true)
      .single();

    if (error && error.code === 'PGRST116') {
      isUnique = true; // ì¤‘ë³µ ì—†ìŒ
    } else {
      attempts++;
    }
  }

  return code;
};
```

#### **2. AI ë¶„ì„ í”„ë¡œì„¸ìŠ¤**
```javascript
// Gemini API í˜¸ì¶œ ë¡œì§
const response = await ai.models.generateContent({
  model: 'gemini-2.0-flash-lite',  // ê²½ì œì  ëª¨ë¸ ì„ íƒ
  contents: [
    generateAnalysisPrompt(routineType),
    fileToGenerativePart(imageBuffer, mimeType)
  ]
});

// ì‹ ë¢°ë„ ê³„ì‚°
const confidence = calculateConfidence(analysisText);

// ê²°ê³¼ ì €ì¥
const { data, error } = await supabase
  .from('ai_analysis')
  .insert([{
    response_id: responseId,
    analysis_data: analysis,
    confidence_score: confidence,
    generated_at: new Date().toISOString()
  }]);
```

---

## ğŸ¨ í”„ë¡ íŠ¸ì—”ë“œ êµ¬ì¡°

### **ì»´í¬ë„ŒíŠ¸ ì•„í‚¤í…ì²˜**
```
src/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ LandingPage.tsx              # ë©”ì¸ ëœë”© í˜ì´ì§€
â”‚   â”œâ”€â”€ TeacherLogin.tsx             # êµì‚¬ ì¸ì¦
â”‚   â”œâ”€â”€ TeacherDashboard.tsx         # êµì‚¬ ëŒ€ì‹œë³´ë“œ
â”‚   â”œâ”€â”€ TeacherRoomDetail.tsx        # í™œë™ë°© ìƒì„¸
â”‚   â”œâ”€â”€ TeacherRoomManagement.tsx    # í™œë™ë°© ê´€ë¦¬
â”‚   â”œâ”€â”€ StudentEntry.tsx             # í•™ìƒ ì…ì¥
â”‚   â”œâ”€â”€ StudentPortfolio.tsx         # í•™ìƒ í¬íŠ¸í´ë¦¬ì˜¤
â”‚   â”œâ”€â”€ SeeThinkWonderForm.tsx       # ì‚¬ê³ ë£¨í‹´ í¼
â”‚   â”œâ”€â”€ StudentActivityDetail.tsx    # í™œë™ ìƒì„¸
â”‚   â”œâ”€â”€ StudentResponseDetail.tsx    # ì‘ë‹µ ìƒì„¸
â”‚   â”œâ”€â”€ StudentActivityExplore.tsx   # í™œë™ íƒìƒ‰
â”‚   â””â”€â”€ ThinkingRoutineAnalysis.tsx  # AI ë¶„ì„ UI
â”œâ”€â”€ lib/
â”‚   â””â”€â”€ supabase.ts                  # Supabase í´ë¼ì´ì–¸íŠ¸
â””â”€â”€ App.tsx                          # ë¼ìš°íŒ… ì„¤ì •
```

### **ë¼ìš°íŒ… êµ¬ì¡°**
```javascript
// React Router ì„¤ì •
<Routes>
  {/* ê³µí†µ */}
  <Route path="/" element={<LandingPage />} />
  
  {/* êµì‚¬ìš© */}
  <Route path="/teacher" element={<TeacherLogin />} />
  <Route path="/teacher/dashboard" element={<TeacherDashboard />} />
  <Route path="/teacher/room/:roomId" element={<TeacherRoomDetail />} />
  <Route path="/teacher/room/:roomId/response/:responseId" 
         element={<StudentResponseDetail />} />
  
  {/* í•™ìƒìš© */}
  <Route path="/student" element={<StudentEntry />} />
  <Route path="/student/activity/:roomId" element={<SeeThinkWonderForm />} />
  <Route path="/student/explore/:roomId" element={<StudentActivityExplore />} />
</Routes>
```

### **ìƒíƒœ ê´€ë¦¬ íŒ¨í„´**
```javascript
// ë¡œì»¬ ìƒíƒœ ê´€ë¦¬ (React Hooks)
const [studentInfo, setStudentInfo] = useState<StudentInfo | null>(null);
const [room, setRoom] = useState<ActivityRoom | null>(null);
const [responses, setResponses] = useState<ThinkingRoutineResponse>({
  see: '',
  think: '',
  wonder: '',
  fourth_step: ''
});

// Supabase ì‹¤ì‹œê°„ êµ¬ë…
useEffect(() => {
  const subscription = supabase
    .channel('responses')
    .on('postgres_changes', 
        { event: 'INSERT', schema: 'public', table: 'student_responses' },
        (payload) => {
          setResponses(prev => [...prev, payload.new]);
        }
    )
    .subscribe();

  return () => subscription.unsubscribe();
}, []);
```

### **íƒ€ì… ì‹œìŠ¤í…œ (TypeScript)**
```typescript
// í•µì‹¬ ì¸í„°í˜ì´ìŠ¤ ì •ì˜
interface ActivityRoom {
  id: string;
  teacher_id: string;
  title: string;
  description: string;
  room_code: string;
  thinking_routine_type: string;
  status: 'draft' | 'active' | 'completed' | 'archived';
  created_at: string;
  updated_at: string;
}

interface StudentResponse {
  id: string;
  room_id: string;
  student_name: string;
  response_data: ThinkingRoutineResponse;
  submitted_at: string;
}

interface ThinkingRoutineResponse {
  see: string;
  think: string;
  wonder: string;
  fourth_step?: string;
  [key: string]: string | undefined;
}
```

---

## ğŸ—„ï¸ ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„

### **ERD (ê°œì²´-ê´€ê³„ ë‹¤ì´ì–´ê·¸ë¨)**
```
Teachers (êµì‚¬)
â”œâ”€ id (PK)
â”œâ”€ email (UNIQUE)
â”œâ”€ name
â”œâ”€ created_at
â””â”€ updated_at

Activity_Rooms (í™œë™ë°©)
â”œâ”€ id (PK)
â”œâ”€ teacher_id (FK â†’ Teachers.id)
â”œâ”€ title
â”œâ”€ description  
â”œâ”€ room_code (UNIQUE, 6ìë¦¬)
â”œâ”€ thinking_routine_type
â”œâ”€ status
â”œâ”€ created_at
â””â”€ updated_at

Routine_Templates (ë£¨í‹´ í…œí”Œë¦¿)
â”œâ”€ id (PK)
â”œâ”€ room_id (FK â†’ Activity_Rooms.id)
â”œâ”€ routine_type
â”œâ”€ content (JSONB)
â”œâ”€ created_at
â””â”€ updated_at

Student_Responses (í•™ìƒ ì‘ë‹µ)
â”œâ”€ id (PK)
â”œâ”€ room_id (FK â†’ Activity_Rooms.id)
â”œâ”€ student_name
â”œâ”€ student_id
â”œâ”€ response_data (JSONB)
â”œâ”€ is_draft
â”œâ”€ submitted_at
â””â”€ updated_at

AI_Analysis (AI ë¶„ì„)
â”œâ”€ id (PK)
â”œâ”€ response_id (FK â†’ Student_Responses.id)
â”œâ”€ analysis_data (JSONB)
â”œâ”€ feedback_data (JSONB)
â””â”€ created_at

Teacher_Evaluations (êµì‚¬ í‰ê°€)
â”œâ”€ id (PK)
â”œâ”€ response_id (FK â†’ Student_Responses.id)
â”œâ”€ teacher_id (FK â†’ Teachers.id)
â”œâ”€ teacher_feedback
â”œâ”€ score (1-5)
â”œâ”€ evaluation_data (JSONB)
â”œâ”€ created_at
â””â”€ updated_at
```

### **ì£¼ìš” í…Œì´ë¸” ìƒì„¸**

#### **1. Activity_Rooms**
```sql
CREATE TABLE activity_rooms (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    teacher_id UUID NOT NULL REFERENCES teachers(id) ON DELETE CASCADE,
    title VARCHAR(200) NOT NULL,
    description TEXT,
    room_code VARCHAR(6) UNIQUE NOT NULL,
    thinking_routine_type VARCHAR(50) NOT NULL DEFAULT 'see-think-wonder',
    status VARCHAR(20) DEFAULT 'draft' 
        CHECK (status IN ('draft', 'active', 'completed', 'archived')),
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

#### **2. Student_Responses (JSONB êµ¬ì¡°)**
```sql
-- response_data JSONB ì˜ˆì‹œ
{
  "see": "ì´ë¯¸ì§€ì—ì„œ íŒŒë€ìƒ‰ í•˜ëŠ˜ê³¼ êµ¬ë¦„ì´ ë³´ì…ë‹ˆë‹¤.",
  "think": "ë‚ ì”¨ê°€ ì¢‹ì•„ ë³´ì—¬ì„œ ê¸°ë¶„ì´ ì¢‹ì•„ì§‘ë‹ˆë‹¤.",
  "wonder": "êµ¬ë¦„ì€ ì–´ë–»ê²Œ ë§Œë“¤ì–´ì§€ëŠ”ì§€ ê¶ê¸ˆí•©ë‹ˆë‹¤.",
  "metadata": {
    "completion_time": 180,
    "voice_input_used": true,
    "session_id": "sess_123"
  }
}
```

#### **3. AI_Analysis (ë¶„ì„ ë°ì´í„° êµ¬ì¡°)**
```sql
-- analysis_data JSONB ì˜ˆì‹œ
{
  "overall_score": 85,
  "detailed_analysis": {
    "see_quality": 80,
    "think_quality": 85,
    "wonder_quality": 90,
    "coherence": 85,
    "creativity": 80
  },
  "strengths": [
    "êµ¬ì²´ì ì¸ ê´€ì°°",
    "ë…¼ë¦¬ì  ì¶”ë¡ ",
    "ì°½ì˜ì  ì§ˆë¬¸"
  ],
  "improvements": [
    "ë” ë‹¤ì–‘í•œ ê´€ì  ê³ ë ¤",
    "ê·¼ê±° ì œì‹œ ê°•í™”"
  ],
  "confidence": 92
}
```

### **ì¸ë±ìŠ¤ ìµœì í™”**
```sql
-- ì„±ëŠ¥ ìµœì í™”ë¥¼ ìœ„í•œ ì¸ë±ìŠ¤
CREATE INDEX idx_activity_rooms_teacher_id ON activity_rooms(teacher_id);
CREATE INDEX idx_activity_rooms_room_code ON activity_rooms(room_code);
CREATE INDEX idx_activity_rooms_status ON activity_rooms(status);
CREATE INDEX idx_student_responses_room_id ON student_responses(room_id);
CREATE INDEX idx_student_responses_submitted_at ON student_responses(submitted_at);
CREATE INDEX idx_ai_analysis_response_id ON ai_analysis(response_id);

-- JSONB ì¸ë±ìŠ¤
CREATE INDEX idx_student_responses_data_gin ON student_responses 
USING GIN (response_data);
CREATE INDEX idx_ai_analysis_data_gin ON ai_analysis 
USING GIN (analysis_data);
```

### **RLS (Row Level Security) ì •ì±…**
```sql
-- êµì‚¬ëŠ” ìì‹ ì˜ ë°ì´í„°ë§Œ ì ‘ê·¼ ê°€ëŠ¥
CREATE POLICY "Teachers can only access their own data" ON teachers
    FOR ALL USING (auth.uid() = id);

CREATE POLICY "Teachers can only access their own rooms" ON activity_rooms
    FOR ALL USING (teacher_id = auth.uid());

-- í•™ìƒ ì‘ë‹µì€ í™œë™ë°© ê¸°ë°˜ ì ‘ê·¼ ì œì–´
CREATE POLICY "Students can access room responses" ON student_responses
    FOR SELECT USING (
        room_id IN (
            SELECT id FROM activity_rooms 
            WHERE status = 'active'
        )
    );
```

---

## ğŸ¤– AI í†µí•©

### **Google Gemini API í†µí•©**

#### **1. ì´ˆê¸°í™” ë° ì„¤ì •**
```javascript
// ë°±ì—”ë“œ: Gemini AI ì´ˆê¸°í™”
const { GoogleGenAI } = require('@google/genai');
const ai = new GoogleGenAI({ 
  apiKey: process.env.GEMINI_API_KEY 
});

// ëª¨ë¸ ì„ íƒ: ë¹„ìš© íš¨ìœ¨ì ì¸ gemini-2.0-flash-lite ì‚¬ìš©
const model = 'gemini-2.0-flash-lite';
```

#### **2. ì´ë¯¸ì§€ ë¶„ì„ í”„ë¡œì„¸ìŠ¤**
```javascript
// ì´ë¯¸ì§€ ì „ì²˜ë¦¬
const fileToGenerativePart = (buffer, mimeType) => {
  return {
    inlineData: {
      data: buffer.toString('base64'),
      mimeType
    }
  };
};

// AI ë¶„ì„ ìš”ì²­
const analyzeStudentResponse = async (imageBuffer, mimeType, routineType) => {
  const prompt = generateAnalysisPrompt(routineType);
  const imagePart = fileToGenerativePart(imageBuffer, mimeType);

  const response = await ai.models.generateContent({
    model: 'gemini-2.0-flash-lite',
    contents: [prompt, imagePart]
  });

  return {
    analysis: response.text,
    confidence: calculateConfidence(response.text),
    metadata: {
      model: 'gemini-2.0-flash-lite',
      timestamp: new Date().toISOString(),
      routineType
    }
  };
};
```

#### **3. ì‚¬ê³ ë£¨í‹´ë³„ ë¶„ì„ í”„ë¡¬í”„íŠ¸**
```javascript
const generateAnalysisPrompt = (routineType) => {
  const basePrompt = `
ë‹¹ì‹ ì€ í•œêµ­ì˜ ì‚¬ê³ ë£¨í‹´(Thinking Routines) êµìœ¡ ì „ë¬¸ê°€ì…ë‹ˆë‹¤.
í•™ìƒì´ ì‘ì„±í•œ ì‚¬ê³ ë£¨í‹´ í™œë™ ê²°ê³¼ë¬¼ì„ ë¶„ì„í•˜ì—¬ êµì‚¬ì—ê²Œ 
ë„ì›€ì´ ë˜ëŠ” í”¼ë“œë°±ì„ ì œê³µí•˜ëŠ” ê²ƒì´ ëª©í‘œì…ë‹ˆë‹¤.

**í‰ê°€ ê¸°ì¤€:**
1. ë‚´ìš©ì˜ ì ì ˆì„±: ê° ë‹¨ê³„ì˜ ëª©ì ì— ë§ëŠ” ì‘ë‹µì¸ê°€?
2. êµ¬ì²´ì„±: ì¶”ìƒì ì´ì§€ ì•Šê³  êµ¬ì²´ì ì¸ ë‚´ìš©ì¸ê°€?  
3. ë…¼ë¦¬ì  ì—°ê²°: ë‹¨ê³„ë“¤ì´ ë…¼ë¦¬ì ìœ¼ë¡œ ì—°ê²°ë˜ëŠ”ê°€?
4. ê¹Šì´: í‘œë©´ì ì´ì§€ ì•Šê³  ê¹Šì´ ìˆëŠ” ì‚¬ê³ ê°€ ë“œëŸ¬ë‚˜ëŠ”ê°€?
5. ì°½ì˜ì„±: ë…ì°½ì ì´ê³  ë‹¤ì–‘í•œ ê´€ì ì´ í¬í•¨ë˜ì–´ ìˆëŠ”ê°€?
  `;

  const routineSpecificPrompts = {
    'see-think-wonder': `
**See-Think-Wonder ì‚¬ê³ ë£¨í‹´ ë¶„ì„:**
- SEE: ê°ê´€ì  ê´€ì°°ì˜ ì •í™•ì„±ê³¼ êµ¬ì²´ì„±
- THINK: ê´€ì°°ì„ ë°”íƒ•ìœ¼ë¡œ í•œ ì¶”ë¡ ì˜ ë…¼ë¦¬ì„±
- WONDER: í˜¸ê¸°ì‹¬ê³¼ íƒêµ¬ ì˜ì§€ì˜ í‘œí˜„
    `,
    '4c': `
**4C ì‚¬ê³ ë£¨í‹´ ë¶„ì„:**
- CONNECT: ê¸°ì¡´ ì§€ì‹ê³¼ì˜ ì—°ê²°ì„±
- CHALLENGE: ë¹„íŒì  ì‚¬ê³ ì˜ ê¹Šì´
- CONCEPTS: í•µì‹¬ ê°œë… íŒŒì•… ëŠ¥ë ¥
- CHANGES: ì‹¤ì²œì  ì ìš© ê°€ëŠ¥ì„±
    `,
    // ... ë‹¤ë¥¸ ë£¨í‹´ë“¤
  };

  return basePrompt + routineSpecificPrompts[routineType];
};
```

#### **4. ì‹ ë¢°ë„ ê³„ì‚° ì•Œê³ ë¦¬ì¦˜**
```javascript
const calculateConfidence = (analysisText) => {
  let confidence = 70; // ê¸°ë³¸ ì‹ ë¢°ë„

  // í…ìŠ¤íŠ¸ ê¸¸ì´ ê¸°ë°˜ ì¡°ì •
  if (analysisText.length > 500) confidence += 10;
  if (analysisText.length > 1000) confidence += 10;

  // í‚¤ì›Œë“œ ì¡´ì¬ ì—¬ë¶€ í™•ì¸
  const qualityKeywords = ['êµ¬ì²´ì ', 'ë…¼ë¦¬ì ', 'ì°½ì˜ì ', 'ê¹Šì´', 'ì—°ê²°'];
  const keywordCount = qualityKeywords.filter(keyword => 
    analysisText.includes(keyword)
  ).length;
  confidence += keywordCount * 2;

  // êµ¬ì¡°í™”ëœ ì‘ë‹µ í™•ì¸
  if (analysisText.includes('**') || analysisText.includes('###')) {
    confidence += 5;
  }

  return Math.min(95, Math.max(60, confidence));
};
```

---

## ğŸš€ ë°°í¬ ë° ì¸í”„ë¼

### **Vercel ë°°í¬ ì„¤ì •**

#### **1. vercel.json êµ¬ì„±**
```json
{
  "installCommand": "npm install && npm install --prefix backend && npm install --prefix frontend",
  "buildCommand": "npm run build --prefix frontend", 
  "outputDirectory": "frontend/build",
  "rewrites": [
    {
      "source": "/api/(.*)",
      "destination": "/backend/server.js"
    },
    {
      "source": "/(.*)", 
      "destination": "/index.html"
    }
  ]
}
```

#### **2. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •**
```bash
# Vercel Environment Variables
SUPABASE_URL=https://xxx.supabase.co
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
GEMINI_API_KEY=AIzaSyD...
JWT_SECRET=your-secret-key
NODE_ENV=production

# Frontend Environment Variables
REACT_APP_API_URL=https://thinking-routines.vercel.app
REACT_APP_SUPABASE_URL=https://xxx.supabase.co
REACT_APP_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

#### **3. ë¹Œë“œ í”„ë¡œì„¸ìŠ¤**
```bash
# ì˜ì¡´ì„± ì„¤ì¹˜
npm install --prefix backend
npm install --prefix frontend

# í”„ë¡ íŠ¸ì—”ë“œ ë¹Œë“œ
npm run build --prefix frontend

# ì„œë²„ë¦¬ìŠ¤ í•¨ìˆ˜ë¡œ ë°±ì—”ë“œ ë°°í¬
vercel --prod
```

### **ì„±ëŠ¥ ìµœì í™”**

#### **1. ë²ˆë“¤ í¬ê¸° ìµœì í™”**
```javascript
// React Code Splitting
const TeacherDashboard = lazy(() => import('./components/TeacherDashboard'));
const StudentEntry = lazy(() => import('./components/StudentEntry'));

// Tree Shaking ìµœì í™”
import { createClient } from '@supabase/supabase-js';
import { GoogleGenerativeAI } from '@google/generative-ai';
```

#### **2. ì´ë¯¸ì§€ ìµœì í™”**
```javascript
// Multer ì„¤ì •ìœ¼ë¡œ íŒŒì¼ í¬ê¸° ì œí•œ
const upload = multer({ 
  storage: multer.memoryStorage(),
  limits: {
    fileSize: 10 * 1024 * 1024 // 10MB ì œí•œ
  },
  fileFilter: (req, file, cb) => {
    if (file.mimetype.startsWith('image/')) {
      cb(null, true);
    } else {
      cb(new Error('ì´ë¯¸ì§€ íŒŒì¼ë§Œ ì—…ë¡œë“œ ê°€ëŠ¥í•©ë‹ˆë‹¤.'), false);
    }
  }
});
```

#### **3. ë°ì´í„°ë² ì´ìŠ¤ ì¿¼ë¦¬ ìµœì í™”**
```javascript
// í•„ìš”í•œ í•„ë“œë§Œ ì„ íƒ
const { data } = await supabase
  .from('student_responses')
  .select('id, student_name, submitted_at, response_data')
  .eq('room_id', roomId)
  .order('submitted_at', { ascending: false })
  .limit(50);

// ì‹¤ì‹œê°„ êµ¬ë… ìµœì í™”
const subscription = supabase
  .channel(`room-${roomId}`)
  .on('postgres_changes', 
      { 
        event: 'INSERT', 
        schema: 'public', 
        table: 'student_responses',
        filter: `room_id=eq.${roomId}`
      },
      handleNewResponse
  )
  .subscribe();
```

---

## ğŸ” ë³´ì•ˆ ë° ì¸ì¦

### **ì¸ì¦ ì‹œìŠ¤í…œ**

#### **1. Supabase Auth í†µí•©**
```javascript
// íšŒì›ê°€ì… í”„ë¡œì„¸ìŠ¤
const signUp = async (email, password, name) => {
  const { data: authData, error: authError } = await supabase.auth.signUp({
    email,
    password,
    options: {
      data: { name }
    }
  });

  if (authData.user) {
    // êµì‚¬ ì •ë³´ë¥¼ ë³„ë„ í…Œì´ë¸”ì— ì €ì¥
    await supabase.from('teachers').insert([{
      id: authData.user.id,
      email: authData.user.email,
      name: name,
      created_at: new Date().toISOString()
    }]);
  }
};
```

#### **2. JWT í† í° ê´€ë¦¬**
```javascript
// í† í° ê²€ì¦ ë¯¸ë“¤ì›¨ì–´
const authenticateToken = async (req, res, next) => {
  const token = req.headers.authorization?.replace('Bearer ', '');
  
  const { data: userData, error } = await supabase.auth.getUser(token);
  
  if (error || !userData.user) {
    return res.status(401).json({ error: 'ì¸ì¦ ì‹¤íŒ¨' });
  }

  req.user = userData.user;
  next();
};
```

### **ë°ì´í„° ë³´ì•ˆ**

#### **1. Row Level Security (RLS)**
```sql
-- êµì‚¬ ë°ì´í„° ë³´í˜¸
CREATE POLICY "Teachers own data only" ON teachers
    FOR ALL USING (auth.uid() = id);

-- í™œë™ë°© ì ‘ê·¼ ì œì–´  
CREATE POLICY "Teacher room access" ON activity_rooms
    FOR ALL USING (teacher_id = auth.uid());

-- í•™ìƒ ì‘ë‹µ ë³´í˜¸
CREATE POLICY "Room-based response access" ON student_responses
    FOR SELECT USING (
        room_id IN (
            SELECT id FROM activity_rooms 
            WHERE teacher_id = auth.uid() OR status = 'active'
        )
    );
```

#### **2. ì…ë ¥ ê²€ì¦ ë° ìƒˆë‹ˆíƒ€ì´ì œì´ì…˜**
```javascript
// ì…ë ¥ ê²€ì¦
const validateRoomData = (data) => {
  const { title, description, routine_type } = data;

  if (!title || title.length < 2 || title.length > 200) {
    throw new Error('ì œëª©ì€ 2-200ì ì‚¬ì´ì—¬ì•¼ í•©ë‹ˆë‹¤.');
  }

  const allowedRoutines = [
    'see-think-wonder', '4c', 'circle-of-viewpoints',
    'connect-extend-challenge', 'frayer-model',
    'used-to-think-now-think', 'think-puzzle-explore'
  ];

  if (!allowedRoutines.includes(routine_type)) {
    throw new Error('ìœ íš¨í•˜ì§€ ì•Šì€ ì‚¬ê³ ë£¨í‹´ ìœ í˜•ì…ë‹ˆë‹¤.');
  }

  return true;
};

// XSS ë°©ì§€
const sanitizeInput = (input) => {
  return input
    .replace(/</g, '&lt;')
    .replace(/>/g, '&gt;')
    .replace(/"/g, '&quot;')
    .replace(/'/g, '&#x27;');
};
```

### **API ë³´ì•ˆ**

#### **1. Rate Limiting**
```javascript
// ìš”ì²­ íšŸìˆ˜ ì œí•œ (ì˜ˆ: Express Rate Limit)
const rateLimit = require('express-rate-limit');

const apiLimiter = rateLimit({
  windowMs: 15 * 60 * 1000, // 15ë¶„
  max: 100, // ìµœëŒ€ 100íšŒ ìš”ì²­
  message: 'ìš”ì²­ íšŸìˆ˜ê°€ ì´ˆê³¼ë˜ì—ˆìŠµë‹ˆë‹¤.'
});

app.use('/api/', apiLimiter);
```

#### **2. CORS ì„¤ì •**
```javascript
const corsOptions = {
  origin: [
    'https://thinking-routines.vercel.app',
    'http://localhost:3000'
  ],
  credentials: true,
  optionsSuccessStatus: 200
};

app.use(cors(corsOptions));
```

---

## âš¡ ì„±ëŠ¥ ìµœì í™”

### **í”„ë¡ íŠ¸ì—”ë“œ ìµœì í™”**

#### **1. React ìµœì í™”**
```javascript
// ë©”ëª¨ì´ì œì´ì…˜
const StudentResponseItem = memo(({ response }) => {
  return (
    <div className="response-item">
      {response.student_name}: {response.response_data.see}
    </div>
  );
});

// ì½œë°± ìµœì í™”
const handleResponseSubmit = useCallback(async (responseData) => {
  await submitResponse(responseData);
  setSubmitted(true);
}, [submitResponse]);

// Effect ìµœì í™”
useEffect(() => {
  if (!roomId) return;
  
  const fetchData = async () => {
    const data = await fetchRoomData(roomId);
    setRoomData(data);
  };
  
  fetchData();
}, [roomId]); // ì˜ì¡´ì„± ìµœì†Œí™”
```

#### **2. ë¡œë”© ìƒíƒœ ê´€ë¦¬**
```javascript
// ìŠ¤ì¼ˆë ˆí†¤ ë¡œë”©
const LoadingSkeleton = () => (
  <div className="animate-pulse">
    <div className="h-4 bg-gray-200 rounded mb-2"></div>
    <div className="h-4 bg-gray-200 rounded w-3/4"></div>
  </div>
);

// ì—ëŸ¬ ë°”ìš´ë”ë¦¬
class ErrorBoundary extends Component {
  constructor(props) {
    super(props);
    this.state = { hasError: false };
  }

  static getDerivedStateFromError(error) {
    return { hasError: true };
  }

  render() {
    if (this.state.hasError) {
      return <div>ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ìƒˆë¡œê³ ì¹¨í•´ì£¼ì„¸ìš”.</div>;
    }

    return this.props.children;
  }
}
```

### **ë°±ì—”ë“œ ìµœì í™”**

#### **1. ë°ì´í„°ë² ì´ìŠ¤ ìµœì í™”**
```sql
-- ì¿¼ë¦¬ ìµœì í™”: í•„ìš”í•œ ì»¬ëŸ¼ë§Œ ì„ íƒ
SELECT id, title, room_code, status 
FROM activity_rooms 
WHERE teacher_id = $1 AND status = 'active'
ORDER BY created_at DESC
LIMIT 20;

-- ì¸ë±ìŠ¤ í™œìš©
CREATE INDEX CONCURRENTLY idx_student_responses_room_submitted 
ON student_responses(room_id, submitted_at DESC);

-- íŒŒí‹°ì…”ë‹ (ëŒ€ìš©ëŸ‰ ë°ì´í„° ì²˜ë¦¬)
CREATE TABLE student_responses_2024 PARTITION OF student_responses
FOR VALUES FROM ('2024-01-01') TO ('2025-01-01');
```

#### **2. ìºì‹± ì „ëµ**
```javascript
// ë©”ëª¨ë¦¬ ìºì‹œ (ê°„ë‹¨í•œ êµ¬í˜„)
const cache = new Map();

const getCachedRoomData = (roomId) => {
  const cacheKey = `room_${roomId}`;
  
  if (cache.has(cacheKey)) {
    const { data, timestamp } = cache.get(cacheKey);
    if (Date.now() - timestamp < 5 * 60 * 1000) { // 5ë¶„ ìºì‹œ
      return data;
    }
  }
  
  return null;
};

const setCachedRoomData = (roomId, data) => {
  cache.set(`room_${roomId}`, {
    data,
    timestamp: Date.now()
  });
};
```

### **AI ì„œë¹„ìŠ¤ ìµœì í™”**

#### **1. ìš”ì²­ ìµœì í™”**
```javascript
// ë°°ì¹˜ ì²˜ë¦¬
const batchAnalyzeResponses = async (responses) => {
  const batches = chunk(responses, 5); // 5ê°œì”© ë°°ì¹˜
  
  const results = [];
  for (const batch of batches) {
    const batchResults = await Promise.all(
      batch.map(response => analyzeResponse(response))
    );
    results.push(...batchResults);
    
    // Rate limiting ê³ ë ¤ (1ì´ˆ ëŒ€ê¸°)
    await new Promise(resolve => setTimeout(resolve, 1000));
  }
  
  return results;
};
```

#### **2. ì—ëŸ¬ ì²˜ë¦¬ ë° ì¬ì‹œë„**
```javascript
const analyzeWithRetry = async (imageData, routineType, maxRetries = 3) => {
  for (let i = 0; i < maxRetries; i++) {
    try {
      return await analyzeStudentResponse(imageData, routineType);
    } catch (error) {
      console.error(`Analysis attempt ${i + 1} failed:`, error);
      
      if (i === maxRetries - 1) throw error;
      
      // ì§€ìˆ˜ ë°±ì˜¤í”„
      await new Promise(resolve => 
        setTimeout(resolve, Math.pow(2, i) * 1000)
      );
    }
  }
};
```

---

## ğŸ“Š ëª¨ë‹ˆí„°ë§ ë° ë¡œê¹…

### **ë¡œê¹… ì‹œìŠ¤í…œ**
```javascript
// êµ¬ì¡°í™”ëœ ë¡œê¹…
const logger = {
  info: (message, meta = {}) => {
    console.log(JSON.stringify({
      level: 'info',
      message,
      timestamp: new Date().toISOString(),
      ...meta
    }));
  },
  error: (message, error, meta = {}) => {
    console.error(JSON.stringify({
      level: 'error',
      message,
      error: error.message,
      stack: error.stack,
      timestamp: new Date().toISOString(),
      ...meta
    }));
  }
};

// ì‚¬ìš© ì˜ˆì‹œ
logger.info('Room created', { 
  roomId: newRoom.id, 
  teacherId: req.user.id,
  routineType: newRoom.thinking_routine_type 
});
```

### **ì„±ëŠ¥ ë©”íŠ¸ë¦­**
```javascript
// API ì‘ë‹µ ì‹œê°„ ì¸¡ì •
const responseTime = (req, res, next) => {
  const startTime = Date.now();
  
  res.on('finish', () => {
    const duration = Date.now() - startTime;
    logger.info('API request completed', {
      method: req.method,
      url: req.url,
      statusCode: res.statusCode,
      duration: `${duration}ms`
    });
  });
  
  next();
};

app.use(responseTime);
```

---

## ğŸ”„ ê°œë°œ ì›Œí¬í”Œë¡œìš°

### **ê°œë°œ í™˜ê²½ ì„¤ì •**
```bash
# 1. ì €ì¥ì†Œ í´ë¡ 
git clone https://github.com/qo1598/thinking_routines.git
cd thinking_routines

# 2. ì˜ì¡´ì„± ì„¤ì¹˜
npm install --prefix backend
npm install --prefix frontend

# 3. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
cp backend/.env.example backend/.env
cp frontend/.env.example frontend/.env

# 4. ê°œë°œ ì„œë²„ ì‹¤í–‰
npm run dev --prefix backend    # í¬íŠ¸ 3001
npm start --prefix frontend     # í¬íŠ¸ 3000
```

### **í…ŒìŠ¤íŠ¸ ì „ëµ**
```javascript
// ìœ ë‹› í…ŒìŠ¤íŠ¸ (Jest + React Testing Library)
import { render, screen, fireEvent } from '@testing-library/react';
import StudentEntry from '../components/StudentEntry';

describe('StudentEntry', () => {
  test('renders room code input', () => {
    render(<StudentEntry />);
    const input = screen.getByPlaceholderText('6ìë¦¬ ì½”ë“œ ì…ë ¥');
    expect(input).toBeInTheDocument();
  });

  test('validates room code format', async () => {
    render(<StudentEntry />);
    const input = screen.getByPlaceholderText('6ìë¦¬ ì½”ë“œ ì…ë ¥');
    
    fireEvent.change(input, { target: { value: '123' } });
    fireEvent.click(screen.getByText('ì°¸ì—¬í•˜ê¸°'));
    
    expect(screen.getByText('6ìë¦¬ ì½”ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”')).toBeInTheDocument();
  });
});
```

### **ë°°í¬ íŒŒì´í”„ë¼ì¸**
```yaml
# .github/workflows/deploy.yml
name: Deploy to Vercel

on:
  push:
    branches: [main]

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      
      - name: Setup Node.js
        uses: actions/setup-node@v2
        with:
          node-version: '18'
          
      - name: Install dependencies
        run: |
          npm install --prefix backend
          npm install --prefix frontend
          
      - name: Run tests
        run: |
          npm test --prefix frontend -- --coverage --watchAll=false
          
      - name: Deploy to Vercel
        uses: vercel/action@v20
        with:
          vercel-token: ${{ secrets.VERCEL_TOKEN }}
          vercel-org-id: ${{ secrets.ORG_ID }}
          vercel-project-id: ${{ secrets.PROJECT_ID }}
```

---

## ğŸ“ˆ í™•ì¥ì„± ê³ ë ¤ì‚¬í•­

### **ìŠ¤ì¼€ì¼ë§ ì „ëµ**
```javascript
// 1. ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° í’€ë§
const { Pool } = require('pg');
const pool = new Pool({
  connectionString: process.env.DATABASE_URL,
  max: 20,
  idleTimeoutMillis: 30000,
  connectionTimeoutMillis: 2000,
});

// 2. ë ˆë””ìŠ¤ ìºì‹± ë„ì… (í–¥í›„)
const redis = require('redis');
const client = redis.createClient(process.env.REDIS_URL);

// 3. ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ë¶„ë¦¬ ê³„íš
// - Auth Service
// - Room Management Service  
// - AI Analysis Service
// - Notification Service
```

### **ëª¨ë‹ˆí„°ë§ ë° ì•Œë¦¼**
```javascript
// í—¬ìŠ¤ ì²´í¬ ì—”ë“œí¬ì¸íŠ¸
app.get('/health', async (req, res) => {
  const health = {
    status: 'OK',
    timestamp: new Date().toISOString(),
    services: {
      database: 'checking...',
      ai: 'checking...'
    }
  };

  try {
    // DB ì—°ê²° í™•ì¸
    await supabase.from('teachers').select('id').limit(1);
    health.services.database = 'OK';
  } catch (error) {
    health.services.database = 'ERROR';
    health.status = 'DEGRADED';
  }

  try {
    // AI ì„œë¹„ìŠ¤ í™•ì¸
    await ai.models.generateContent({
      model: 'gemini-2.0-flash-lite',
      contents: ['Health check']
    });
    health.services.ai = 'OK';
  } catch (error) {
    health.services.ai = 'ERROR';
    health.status = 'DEGRADED';
  }

  res.json(health);
});
```

---

ì´ ê¸°ìˆ  ë¬¸ì„œëŠ” ì‚¬ê³ ë£¨í‹´ ì›¹ì•±ì˜ ì „ì²´ì ì¸ ê¸°ìˆ ì  êµ¬ì¡°ì™€ êµ¬í˜„ ì„¸ë¶€ì‚¬í•­ì„ ë‹¤ë£¹ë‹ˆë‹¤. ê° ì„¹ì…˜ì€ ì‹¤ì œ ì½”ë“œë² ì´ìŠ¤ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì‘ì„±ë˜ì—ˆìœ¼ë©°, í–¥í›„ ê°œë°œê³¼ ìœ ì§€ë³´ìˆ˜ì— ì°¸ê³ í•  ìˆ˜ ìˆë„ë¡ êµ¬ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.